{
  "version": 3,
  "sources": ["../../src/core/errors.ts", "../../node_modules/.pnpm/@date-fns+tz@1.4.1/node_modules/@date-fns/tz/tzName/index.js", "../../node_modules/.pnpm/@date-fns+tz@1.4.1/node_modules/@date-fns/tz/tzOffset/index.js", "../../node_modules/.pnpm/@date-fns+tz@1.4.1/node_modules/@date-fns/tz/date/mini.js", "../../node_modules/.pnpm/@date-fns+tz@1.4.1/node_modules/@date-fns/tz/date/index.js", "../../src/utils/exec-async.ts", "../../src/utils/command.ts", "../../src/utils/performance.ts"],
  "sourcesContent": ["/**\n * \u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u5171\u901A\u306E\u57FA\u5E95\u30A8\u30E9\u30FC\u30AF\u30E9\u30B9\n * \u30B5\u30D6\u30AF\u30E9\u30B9\u540D\u3092\u81EA\u52D5\u7684\u306Bname\u30D7\u30ED\u30D1\u30C6\u30A3\u306B\u8A2D\u5B9A\u3059\u308B\n */\nexport class AppError extends Error {\n  /**\n   * @param message \u30A8\u30E9\u30FC\u30E1\u30C3\u30BB\u30FC\u30B8\n   * @param options \u30A8\u30E9\u30FC\u30AA\u30D7\u30B7\u30E7\u30F3\uFF08cause\u306A\u3069\uFF09\n   */\n  constructor(message: string, options: ErrorOptions = {}) {\n    super(message, options);\n    this.name = this.constructor.name;\n  }\n}\n\n/** \u7121\u52B9\u306A\u5F15\u6570\u304C\u6E21\u3055\u308C\u305F\u5834\u5408\u306E\u30A8\u30E9\u30FC */\nexport class InvalidArgumentError extends AppError {}\n\n/** \u5B9F\u884C\u6642\u30A8\u30E9\u30FC */\nexport class RuntimeError extends AppError {}\n\n/** \u30EA\u30BD\u30FC\u30B9\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u5834\u5408\u306E\u30A8\u30E9\u30FC */\nexport class NotFoundError extends AppError {}\n\n/** \u30EA\u30BD\u30FC\u30B9\u306E\u7AF6\u5408\u304C\u767A\u751F\u3057\u305F\u5834\u5408\u306E\u30A8\u30E9\u30FC */\nexport class ConflictError extends AppError {}\n\n/** \u4E0D\u6B63\u306A\u72B6\u614B\u3067\u64CD\u4F5C\u304C\u5B9F\u884C\u3055\u308C\u305F\u5834\u5408\u306E\u30A8\u30E9\u30FC */\nexport class StateError extends AppError {}\n\n/** \u4F9D\u5B58\u95A2\u4FC2\u306B\u554F\u984C\u304C\u3042\u308B\u5834\u5408\u306E\u30A8\u30E9\u30FC */\nexport class DependencyError extends AppError {}\n\n/** \u5FAA\u74B0\u4F9D\u5B58\u304C\u691C\u51FA\u3055\u308C\u305F\u5834\u5408\u306E\u30A8\u30E9\u30FC */\nexport class CyclicDependencyError extends DependencyError {}\n\n/** \u30B7\u30EA\u30A2\u30E9\u30A4\u30BA/\u30C7\u30B7\u30EA\u30A2\u30E9\u30A4\u30BA\u306B\u5931\u6557\u3057\u305F\u5834\u5408\u306E\u30A8\u30E9\u30FC */\nexport class SerializationError extends AppError {}\n", "/**\n * Time zone name format.\n */\n\n/**\n * The function returns the time zone name for the given date in the specified\n * time zone.\n *\n * It uses the `Intl.DateTimeFormat` API and by default outputs the time zone\n * name in a long format, e.g. \"Pacific Standard Time\" or\n * \"Singapore Standard Time\".\n *\n * It is possible to specify the format as the third argument using one of the following options\n *\n * - \"short\": e.g. \"EDT\" or \"GMT+8\".\n * - \"long\": e.g. \"Eastern Daylight Time\".\n * - \"shortGeneric\": e.g. \"ET\" or \"Singapore Time\".\n * - \"longGeneric\": e.g. \"Eastern Time\" or \"Singapore Standard Time\".\n *\n * These options correspond to TR35 tokens `z..zzz`, `zzzz`, `v`, and `vvvv` respectively: https://www.unicode.org/reports/tr35/tr35-dates.html#dfst-zone\n *\n * @param timeZone - Time zone name (IANA or UTC offset)\n * @param date - Date object to get the time zone name for\n * @param format - Optional format of the time zone name. Defaults to \"long\". Can be \"short\", \"long\", \"shortGeneric\", or \"longGeneric\".\n *\n * @returns Time zone name (e.g. \"Singapore Standard Time\")\n */\nexport function tzName(timeZone, date, format = \"long\") {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    // Enforces engine to render the time. Without the option JavaScriptCore omits it.\n    hour: \"numeric\",\n    timeZone: timeZone,\n    timeZoneName: format\n  }).format(date).split(/\\s/g) // Format.JS uses non-breaking spaces\n  .slice(2) // Skip the hour and AM/PM parts\n  .join(\" \");\n}", "const offsetFormatCache = {};\nconst offsetCache = {};\n\n/**\n * The function extracts UTC offset in minutes from the given date in specified\n * time zone.\n *\n * Unlike `Date.prototype.getTimezoneOffset`, this function returns the value\n * mirrored to the sign of the offset in the time zone. For Asia/Singapore\n * (UTC+8), `tzOffset` returns 480, while `getTimezoneOffset` returns -480.\n *\n * @param timeZone - Time zone name (IANA or UTC offset)\n * @param date - Date to check the offset for\n *\n * @returns UTC offset in minutes\n */\nexport function tzOffset(timeZone, date) {\n  try {\n    const format = offsetFormatCache[timeZone] ||= new Intl.DateTimeFormat(\"en-US\", {\n      timeZone,\n      timeZoneName: \"longOffset\"\n    }).format;\n    const offsetStr = format(date).split(\"GMT\")[1];\n    if (offsetStr in offsetCache) return offsetCache[offsetStr];\n    return calcOffset(offsetStr, offsetStr.split(\":\"));\n  } catch {\n    // Fallback to manual parsing if the runtime doesn't support \u00B1HH:MM/\u00B1HHMM/\u00B1HH\n    // See: https://github.com/nodejs/node/issues/53419\n    if (timeZone in offsetCache) return offsetCache[timeZone];\n    const captures = timeZone?.match(offsetRe);\n    if (captures) return calcOffset(timeZone, captures.slice(1));\n    return NaN;\n  }\n}\nconst offsetRe = /([+-]\\d\\d):?(\\d\\d)?/;\nfunction calcOffset(cacheStr, values) {\n  const hours = +(values[0] || 0);\n  const minutes = +(values[1] || 0);\n  // Convert seconds to minutes by dividing by 60 to keep the function return in minutes.\n  const seconds = +(values[2] || 0) / 60;\n  return offsetCache[cacheStr] = hours * 60 + minutes > 0 ? hours * 60 + minutes + seconds : hours * 60 - minutes - seconds;\n}", "import { tzOffset } from \"../tzOffset/index.js\";\nexport class TZDateMini extends Date {\n  //#region static\n\n  constructor(...args) {\n    super();\n    if (args.length > 1 && typeof args[args.length - 1] === \"string\") {\n      this.timeZone = args.pop();\n    }\n    this.internal = new Date();\n    if (isNaN(tzOffset(this.timeZone, this))) {\n      this.setTime(NaN);\n    } else {\n      if (!args.length) {\n        this.setTime(Date.now());\n      } else if (typeof args[0] === \"number\" && (args.length === 1 || args.length === 2 && typeof args[1] !== \"number\")) {\n        this.setTime(args[0]);\n      } else if (typeof args[0] === \"string\") {\n        this.setTime(+new Date(args[0]));\n      } else if (args[0] instanceof Date) {\n        this.setTime(+args[0]);\n      } else {\n        this.setTime(+new Date(...args));\n        adjustToSystemTZ(this, NaN);\n        syncToInternal(this);\n      }\n    }\n  }\n  static tz(tz, ...args) {\n    return args.length ? new TZDateMini(...args, tz) : new TZDateMini(Date.now(), tz);\n  }\n\n  //#endregion\n\n  //#region time zone\n\n  withTimeZone(timeZone) {\n    return new TZDateMini(+this, timeZone);\n  }\n  getTimezoneOffset() {\n    const offset = -tzOffset(this.timeZone, this);\n    // Remove the seconds offset\n    // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n    return offset > 0 ? Math.floor(offset) : Math.ceil(offset);\n  }\n\n  //#endregion\n\n  //#region time\n\n  setTime(time) {\n    Date.prototype.setTime.apply(this, arguments);\n    syncToInternal(this);\n    return +this;\n  }\n\n  //#endregion\n\n  //#region date-fns integration\n\n  [Symbol.for(\"constructDateFrom\")](date) {\n    return new TZDateMini(+new Date(date), this.timeZone);\n  }\n\n  //#endregion\n}\n\n// Assign getters and setters\nconst re = /^(get|set)(?!UTC)/;\nObject.getOwnPropertyNames(Date.prototype).forEach(method => {\n  if (!re.test(method)) return;\n  const utcMethod = method.replace(re, \"$1UTC\");\n  // Filter out methods without UTC counterparts\n  if (!TZDateMini.prototype[utcMethod]) return;\n  if (method.startsWith(\"get\")) {\n    // Delegate to internal date's UTC method\n    TZDateMini.prototype[method] = function () {\n      return this.internal[utcMethod]();\n    };\n  } else {\n    // Assign regular setter\n    TZDateMini.prototype[method] = function () {\n      Date.prototype[utcMethod].apply(this.internal, arguments);\n      syncFromInternal(this);\n      return +this;\n    };\n\n    // Assign UTC setter\n    TZDateMini.prototype[utcMethod] = function () {\n      Date.prototype[utcMethod].apply(this, arguments);\n      syncToInternal(this);\n      return +this;\n    };\n  }\n});\n\n/**\n * Function syncs time to internal date, applying the time zone offset.\n *\n * @param {Date} date - Date to sync\n */\nfunction syncToInternal(date) {\n  date.internal.setTime(+date);\n  date.internal.setUTCSeconds(date.internal.getUTCSeconds() - Math.round(-tzOffset(date.timeZone, date) * 60));\n}\n\n/**\n * Function syncs the internal date UTC values to the date. It allows to get\n * accurate timestamp value.\n *\n * @param {Date} date - The date to sync\n */\nfunction syncFromInternal(date) {\n  // First we transpose the internal values\n  Date.prototype.setFullYear.call(date, date.internal.getUTCFullYear(), date.internal.getUTCMonth(), date.internal.getUTCDate());\n  Date.prototype.setHours.call(date, date.internal.getUTCHours(), date.internal.getUTCMinutes(), date.internal.getUTCSeconds(), date.internal.getUTCMilliseconds());\n\n  // Now we have to adjust the date to the system time zone\n  adjustToSystemTZ(date);\n}\n\n/**\n * Function adjusts the date to the system time zone. It uses the time zone\n * differences to calculate the offset and adjust the date.\n *\n * @param {Date} date - Date to adjust\n */\nfunction adjustToSystemTZ(date) {\n  // Save the time zone offset before all the adjustments\n  const baseOffset = tzOffset(date.timeZone, date);\n  // Remove the seconds offset\n  // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n  const offset = baseOffset > 0 ? Math.floor(baseOffset) : Math.ceil(baseOffset);\n  //#region System DST adjustment\n\n  // The biggest problem with using the system time zone is that when we create\n  // a date from internal values stored in UTC, the system time zone might end\n  // up on the DST hour:\n  //\n  //   $ TZ=America/New_York node\n  //   > new Date(2020, 2, 8, 1).toString()\n  //   'Sun Mar 08 2020 01:00:00 GMT-0500 (Eastern Standard Time)'\n  //   > new Date(2020, 2, 8, 2).toString()\n  //   'Sun Mar 08 2020 03:00:00 GMT-0400 (Eastern Daylight Time)'\n  //   > new Date(2020, 2, 8, 3).toString()\n  //   'Sun Mar 08 2020 03:00:00 GMT-0400 (Eastern Daylight Time)'\n  //   > new Date(2020, 2, 8, 4).toString()\n  //   'Sun Mar 08 2020 04:00:00 GMT-0400 (Eastern Daylight Time)'\n  //\n  // Here we get the same hour for both 2 and 3, because the system time zone\n  // has DST beginning at 8 March 2020, 2 a.m. and jumps to 3 a.m. So we have\n  // to adjust the internal date to reflect that.\n  //\n  // However we want to adjust only if that's the DST hour the change happenes,\n  // not the hour where DST moves to.\n\n  // We calculate the previous hour to see if the time zone offset has changed\n  // and we have landed on the DST hour.\n  const prevHour = new Date(+date);\n  // We use UTC methods here as we don't want to land on the same hour again\n  // in case of DST.\n  prevHour.setUTCHours(prevHour.getUTCHours() - 1);\n\n  // Calculate if we are on the system DST hour.\n  const systemOffset = -new Date(+date).getTimezoneOffset();\n  const prevHourSystemOffset = -new Date(+prevHour).getTimezoneOffset();\n  const systemDSTChange = systemOffset - prevHourSystemOffset;\n  // Detect the DST shift. System DST change will occur both on\n  const dstShift = Date.prototype.getHours.apply(date) !== date.internal.getUTCHours();\n\n  // Move the internal date when we are on the system DST hour.\n  if (systemDSTChange && dstShift) date.internal.setUTCMinutes(date.internal.getUTCMinutes() + systemDSTChange);\n\n  //#endregion\n\n  //#region System diff adjustment\n\n  // Now we need to adjust the date, since we just applied internal values.\n  // We need to calculate the difference between the system and date time zones\n  // and apply it to the date.\n\n  const offsetDiff = systemOffset - offset;\n  if (offsetDiff) Date.prototype.setUTCMinutes.call(date, Date.prototype.getUTCMinutes.call(date) + offsetDiff);\n\n  //#endregion\n\n  //#region Seconds System diff adjustment\n\n  const systemDate = new Date(+date);\n  // Set the UTC seconds to 0 to isolate the timezone offset in seconds.\n  systemDate.setUTCSeconds(0);\n  // For negative systemOffset, invert the seconds.\n  const systemSecondsOffset = systemOffset > 0 ? systemDate.getSeconds() : (systemDate.getSeconds() - 60) % 60;\n\n  // Calculate the seconds offset based on the timezone offset.\n  const secondsOffset = Math.round(-(tzOffset(date.timeZone, date) * 60)) % 60;\n  if (secondsOffset || systemSecondsOffset) {\n    date.internal.setUTCSeconds(date.internal.getUTCSeconds() + secondsOffset);\n    Date.prototype.setUTCSeconds.call(date, Date.prototype.getUTCSeconds.call(date) + secondsOffset + systemSecondsOffset);\n  }\n\n  //#endregion\n\n  //#region Post-adjustment DST fix\n\n  const postBaseOffset = tzOffset(date.timeZone, date);\n  // Remove the seconds offset\n  // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n  const postOffset = postBaseOffset > 0 ? Math.floor(postBaseOffset) : Math.ceil(postBaseOffset);\n  const postSystemOffset = -new Date(+date).getTimezoneOffset();\n  const postOffsetDiff = postSystemOffset - postOffset;\n  const offsetChanged = postOffset !== offset;\n  const postDiff = postOffsetDiff - offsetDiff;\n  if (offsetChanged && postDiff) {\n    Date.prototype.setUTCMinutes.call(date, Date.prototype.getUTCMinutes.call(date) + postDiff);\n\n    // Now we need to check if got offset change during the post-adjustment.\n    // If so, we also need both dates to reflect that.\n\n    const newBaseOffset = tzOffset(date.timeZone, date);\n    // Remove the seconds offset\n    // use Math.floor for negative GMT timezones and Math.ceil for positive GMT timezones.\n    const newOffset = newBaseOffset > 0 ? Math.floor(newBaseOffset) : Math.ceil(newBaseOffset);\n    const offsetChange = postOffset - newOffset;\n    if (offsetChange) {\n      date.internal.setUTCMinutes(date.internal.getUTCMinutes() + offsetChange);\n      Date.prototype.setUTCMinutes.call(date, Date.prototype.getUTCMinutes.call(date) + offsetChange);\n    }\n  }\n\n  //#endregion\n}", "import { tzName } from \"../tzName/index.js\";\nimport { TZDateMini } from \"./mini.js\";\nexport class TZDate extends TZDateMini {\n  //#region static\n\n  static tz(tz, ...args) {\n    return args.length ? new TZDate(...args, tz) : new TZDate(Date.now(), tz);\n  }\n\n  //#endregion\n\n  //#region representation\n\n  toISOString() {\n    const [sign, hours, minutes] = this.tzComponents();\n    const tz = `${sign}${hours}:${minutes}`;\n    return this.internal.toISOString().slice(0, -1) + tz;\n  }\n  toString() {\n    // \"Tue Aug 13 2024 07:50:19 GMT+0800 (Singapore Standard Time)\";\n    return `${this.toDateString()} ${this.toTimeString()}`;\n  }\n  toDateString() {\n    // toUTCString returns RFC 7231 (\"Mon, 12 Aug 2024 23:36:08 GMT\")\n    const [day, date, month, year] = this.internal.toUTCString().split(\" \");\n    // \"Tue Aug 13 2024\"\n    return `${day?.slice(0, -1) /* Remove \",\" */} ${month} ${date} ${year}`;\n  }\n  toTimeString() {\n    // toUTCString returns RFC 7231 (\"Mon, 12 Aug 2024 23:36:08 GMT\")\n    const time = this.internal.toUTCString().split(\" \")[4];\n    const [sign, hours, minutes] = this.tzComponents();\n    // \"07:42:23 GMT+0800 (Singapore Standard Time)\"\n    return `${time} GMT${sign}${hours}${minutes} (${tzName(this.timeZone, this)})`;\n  }\n  toLocaleString(locales, options) {\n    return Date.prototype.toLocaleString.call(this, locales, {\n      ...options,\n      timeZone: options?.timeZone || this.timeZone\n    });\n  }\n  toLocaleDateString(locales, options) {\n    return Date.prototype.toLocaleDateString.call(this, locales, {\n      ...options,\n      timeZone: options?.timeZone || this.timeZone\n    });\n  }\n  toLocaleTimeString(locales, options) {\n    return Date.prototype.toLocaleTimeString.call(this, locales, {\n      ...options,\n      timeZone: options?.timeZone || this.timeZone\n    });\n  }\n\n  //#endregion\n\n  //#region private\n\n  tzComponents() {\n    const offset = this.getTimezoneOffset();\n    const sign = offset > 0 ? \"-\" : \"+\";\n    const hours = String(Math.floor(Math.abs(offset) / 60)).padStart(2, \"0\");\n    const minutes = String(Math.abs(offset) % 60).padStart(2, \"0\");\n    return [sign, hours, minutes];\n  }\n\n  //#endregion\n\n  withTimeZone(timeZone) {\n    return new TZDate(+this, timeZone);\n  }\n\n  //#region date-fns integration\n\n  [Symbol.for(\"constructDateFrom\")](date) {\n    return new TZDate(+new Date(date), this.timeZone);\n  }\n\n  //#endregion\n}", "import {\n  type ExecFileOptions,\n  type ExecOptions,\n  exec,\n  execFile,\n} from \"node:child_process\";\nimport { promisify } from \"node:util\";\nimport { InvalidArgumentError } from \"../core/index.js\";\n\nconst DEFAULT_ENCODING: BufferEncoding = \"utf8\";\nconst SHELL_EXEC_DISABLED_MESSAGE =\n  \"Shell execution is disabled. Pass { allowShell: true } to execAsync.\";\n\nexport interface ExecResult {\n  stdout: string;\n  stderr: string;\n}\n\nexport interface ExecAsyncOptions extends ExecOptions {\n  allowShell?: boolean;\n}\n\nconst execAsyncRaw = promisify(exec);\nconst execFileAsyncRaw = promisify(execFile);\n\nconst normalizeOutput = (value: string | Buffer | undefined): string => {\n  if (typeof value === \"string\") {\n    return value;\n  }\n  if (value) {\n    return value.toString(DEFAULT_ENCODING);\n  }\n  return \"\";\n};\n\n/**\n * NOTE: Executes through a shell. Prefer execFileAsync when possible.\n * allowShell \u3092\u660E\u793A\u3057\u306A\u3044\u9650\u308A\u5B9F\u884C\u3055\u308C\u307E\u305B\u3093\u3002\n */\nexport const execAsync = async (\n  command: string,\n  options: ExecAsyncOptions = {},\n): Promise<ExecResult> => {\n  if (!options.allowShell) {\n    throw new InvalidArgumentError(SHELL_EXEC_DISABLED_MESSAGE);\n  }\n  const { allowShell: _allowShell, ...execOptions } = options;\n  const { stdout, stderr } = await execAsyncRaw(command, {\n    encoding: DEFAULT_ENCODING,\n    ...execOptions,\n  });\n  return { stdout: normalizeOutput(stdout), stderr: normalizeOutput(stderr) };\n};\n\n/**\n * \u30B7\u30A7\u30EB\u3092\u4ECB\u3055\u305A\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u76F4\u63A5\u5B9F\u884C\u3059\u308B\n * @param file \u5B9F\u884C\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u30D1\u30B9\n * @param args \u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u5F15\u6570\n * @param options \u5B9F\u884C\u30AA\u30D7\u30B7\u30E7\u30F3\n * @returns \u6A19\u6E96\u51FA\u529B\u3068\u6A19\u6E96\u30A8\u30E9\u30FC\u51FA\u529B\n */\nexport const execFileAsync = async (\n  file: string,\n  args: readonly string[] = [],\n  options: ExecFileOptions = {},\n): Promise<ExecResult> => {\n  const { stdout, stderr } = await execFileAsyncRaw(file, args, {\n    encoding: DEFAULT_ENCODING,\n    ...options,\n  });\n  return { stdout: normalizeOutput(stdout), stderr: normalizeOutput(stderr) };\n};\n", "import { RuntimeError } from \"../core/index.js\";\nimport { execFileAsync } from \"./exec-async.js\";\n\nconst formatCommand = (command: string, args: readonly string[]): string =>\n  [command, ...args].join(\" \");\n\ntype ExecError = Error & { stderr?: string | Buffer; code?: number };\n\nconst isExecError = (error: unknown): error is ExecError =>\n  error instanceof Error && (\"stderr\" in error || \"code\" in error);\n\n/**\n * \u5916\u90E8\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3057\u3001\u6A19\u6E96\u51FA\u529B\u3092\u8FD4\u3059\n * \u30B7\u30A7\u30EB\u3092\u4ECB\u3055\u305A\u5B89\u5168\u306B\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3059\u308B\n * @param command \u5B9F\u884C\u3059\u308B\u30B3\u30DE\u30F3\u30C9\n * @param args \u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u5F15\u6570\n * @returns \u6A19\u6E96\u51FA\u529B\u306E\u6587\u5B57\u5217\n * @throws {RuntimeError} \u30B3\u30DE\u30F3\u30C9\u306E\u5B9F\u884C\u306B\u5931\u6557\u3057\u305F\u5834\u5408\n */\nexport const execCommand = async (\n  command: string,\n  args: readonly string[] = [],\n): Promise<string> => {\n  const commandText = formatCommand(command, args);\n\n  try {\n    const { stdout } = await execFileAsync(command, args);\n    return stdout;\n  } catch (error: unknown) {\n    if (isExecError(error)) {\n      const stderr =\n        typeof error.stderr === \"string\"\n          ? error.stderr\n          : (error.stderr?.toString() ?? \"\");\n\n      throw new RuntimeError(\n        `Command failed: ${commandText}\\nExit code: ${error.code}\\n${stderr}`,\n      );\n    }\n\n    throw new RuntimeError(`Command failed: ${commandText}\\n${error}`);\n  }\n};\n", "import { performance } from \"node:perf_hooks\";\n\nconst DEFAULT_MEASUREMENT_TIMES = 10_000;\n\n/**\n * \u95A2\u6570\u306E\u5B9F\u884C\u6642\u9593\u3092\u8A08\u6E2C\u3059\u308B\n * @param fn \u8A08\u6E2C\u5BFE\u8C61\u306E\u95A2\u6570\n * @returns \u5B9F\u884C\u7D50\u679C\u3068\u7D4C\u904E\u6642\u9593\uFF08\u30DF\u30EA\u79D2\uFF09\n */\nexport const runPerformance = <T>(fn: () => T): { result: T; time: number } => {\n  const t0 = performance.now();\n  const result = fn();\n  const t1 = performance.now();\n  const time = t1 - t0;\n\n  return { result, time };\n};\n\n/**\n * \u95A2\u6570\u3092\u8907\u6570\u56DE\u5B9F\u884C\u3057\u3001\u5404\u56DE\u306E\u5B9F\u884C\u6642\u9593\u3092\u53CE\u96C6\u3059\u308B\n * @param fn \u8A08\u6E2C\u5BFE\u8C61\u306E\u95A2\u6570\n * @param times \u5B9F\u884C\u56DE\u6570\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8: 10,000\uFF09\n * @returns \u5404\u56DE\u306E\u5B9F\u884C\u6642\u9593\uFF08\u30DF\u30EA\u79D2\uFF09\u306E\u914D\u5217\n */\nexport const measurePerformance = <T>(\n  fn: () => T,\n  times: number = DEFAULT_MEASUREMENT_TIMES,\n): { times: number[] } => {\n  const resultTimes: number[] = [];\n\n  for (let i = 0; i < times; i++) {\n    const { time } = runPerformance(fn);\n    resultTimes.push(time);\n  }\n\n  return { times: resultTimes };\n};\n"],
  "mappings": "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",
  "names": []
}
